<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>DeepSeek Poker</title>
    <link rel="stylesheet" href="/assets/styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="top-bar">
        <div>
          <h1>DeepSeek Poker</h1>
          <p>一台机器运行服务，多台设备共享同一张有 AI 的德州扑克桌。</p>
        </div>
        <div class="status-badge" id="status-text">后端未连接</div>
      </header>

      <div class="layout">
        <aside class="control-panel">
          <section class="panel">
            <h2>当前身份</h2>
            <div id="session-info" class="session-info">
              <p>尚未连接到任何房间。</p>
            </div>
            <div class="actions-row">
              <button id="start-hand-btn" disabled>开始新一手牌 (房主)</button>
              <button id="refresh-state-btn" disabled>立即同步</button>
              <button id="leave-room-btn" disabled class="danger">退出/清除凭证</button>
            </div>
          </section>

          <section class="panel">
            <h2>创建房间</h2>
            <form id="create-room-form" class="stack-form">
              <label>房主名称<input type="text" name="host_name" required maxlength="32" /></label>
              <label>房间总人数<input type="number" name="total_seats" min="2" max="9" value="6" inputmode="numeric" pattern="[0-9]*" /></label>
              <label>AI 数量<input type="number" name="ai_players" min="0" value="2" inputmode="numeric" pattern="[0-9]*" /></label>
              <label>初始筹码<input type="number" name="starting_stack" min="100" value="2000" inputmode="numeric" pattern="[0-9]*" /></label>
              <div class="grid-2">
                <label>Small Blind<input type="number" name="small_blind" min="1" value="10" inputmode="numeric" pattern="[0-9]*" /></label>
                <label>Big Blind<input type="number" name="big_blind" min="2" value="20" inputmode="numeric" pattern="[0-9]*" /></label>
              </div>
              <button type="submit">创建房间</button>
            </form>
          </section>

          <section class="panel">
            <h2>加入房间</h2>
            <form id="join-room-form" class="stack-form">
              <label>房间 ID<input type="text" name="room_id" required maxlength="6" /></label>
              <label>玩家名称<input type="text" name="player_name" required maxlength="32" /></label>
              <button type="submit">加入房间</button>
            </form>
          </section>

          <section class="panel lobby">
            <div class="lobby-header">
              <h2>房间大厅</h2>
              <button id="refresh-lobby-btn" type="button">刷新</button>
            </div>
            <div id="rooms-list" class="rooms-list"></div>
          </section>
        </aside>

        <main class="table-panel">
          <section class="board-panel">
            <div class="table-meta">
              <div>
                <span>房间</span>
                <strong id="table-room-id">-</strong>
              </div>
              <div>
                <span>阶段</span>
                <strong id="phase-label">-</strong>
              </div>
              <div>
                <span>轮到谁</span>
                <strong id="current-player">-</strong>
              </div>
              <div>
                <span>当前下注</span>
                <strong id="current-bet">0</strong>
              </div>
            </div>
            <div class="board">
              <div class="pot-display">
                <span>彩池</span>
                <strong id="pot-value">0</strong>
              </div>
              <div class="board-cards" id="community-cards"></div>
              <div class="event-text" id="table-event">等待中...</div>
            </div>
          </section>

          <section class="players-panel">
            <div class="players-header">
              <h3>玩家顺序</h3>
              <small>按座位号排序</small>
            </div>
            <div id="players-grid" class="players-grid"></div>
          </section>

          <section class="player-hud" id="action-panel">
            <div class="hero-info">
              <div>
                <p class="label">当前玩家</p>
                <h3 id="hero-name">未入座</h3>
                <p>筹码 <strong id="hero-stack">-</strong></p>
                <p>待跟注 <strong id="hero-call">-</strong></p>
              </div>
              <div class="hero-cards" id="hero-cards"></div>
            </div>
            <div class="action-panel">
              <div class="action-buttons" id="action-buttons"></div>
              <label>
                加注到 / 下注额
                <input type="number" id="bet-amount" min="0" step="10" inputmode="numeric" pattern="[0-9]*" />
              </label>
            </div>
          </section>

          <section class="feed-panel">
            <div class="feed-header">
              <h3>行动记录</h3>
              <small>最近 40 条</small>
            </div>
            <div id="action-log" class="action-feed"></div>
          </section>
        </main>
      </div>
    </div>

    <script type="module" src="/assets/main.js"></script>
  </body>
</html>
